(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[743],{9986:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/board",function(){return r(5325)}])},5325:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return x}});var t=r(4051),o=r.n(t),a=r(5893),c=r(7294),i=r(1163),s=function(e){var n=e.owner,r=e.value,t=e.position,o=e.onClick,c=e.selected;return(0,a.jsx)("div",{style:{minWidth:"4rem",textAlign:"center",height:"4rem",backgroundColor:null===n||void 0===n?void 0:n.color,borderRadius:"1rem",borderStyle:"solid",borderColor:c?"gold":"white",borderWidth:"2px",color:"white",fontSize:"25px",lineHeight:"3.4rem"},onClick:o(t,n),children:r})},u=r(520);function l(e,n,r,t,o,a,c){try{var i=e[a](c),s=i.value}catch(u){return void r(u)}i.done?n(s):Promise.resolve(s).then(t,o)}function d(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function c(e){l(a,t,o,c,i,"next",e)}function i(e){l(a,t,o,c,i,"throw",e)}c(void 0)}))}}function f(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function p(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){f(e,n,r[n])}))}return e}var x=function(){var e=(0,c.useState)(8),n=e[0],r=e[1],t=(0,c.useState)(8),l=t[0],f=t[1],x=(0,c.useState)(Array.from(Array(l).keys()).map((function(e){return Array.from(Array(n).keys()).map((function(e){return{val:0,owner:void 0}}))}))),v=x[0],h=x[1],w=(0,c.useState)(null),y=w[0],b=w[1],m=(0,c.useState)(null),k=m[0],g=m[1],j=(0,c.useState)(0),S=j[0],_=j[1],O=function(e,n){h((function(r){var t=r;return t[e.y][e.x]=n,t}))},A=function(){var e=d(o().mark((function e(){var n,t,a,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=parseInt,e.next=3,fetch("".concat(u.T,"/board/last_updated"));case 3:return e.next=5,e.sent.json();case 5:if(e.t1=e.sent,(n=(0,e.t0)(e.t1))!=S){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,fetch("".concat(u.T,"/board/config"));case 11:return e.next=13,e.sent.json();case 13:return t=e.sent,e.next=16,fetch("".concat(u.T,"/board/users"));case 16:return e.next=18,e.sent.json();case 18:return a=e.sent,e.next=21,fetch("".concat(u.T,"/board"));case 21:return e.next=23,e.sent.json();case 23:return c=e.sent,e.next=26,fetch("".concat(u.T,"/board/hashed_user?id=").concat(localStorage.getItem("login")));case 26:return e.next=28,e.sent.json();case 28:(s=e.sent)in a||i.default.push("/"),h(c.map((function(e){return e.map((function(e){return p({},e,{owner:e.owner?{id:e.owner,color:a[e.owner]}:null})}))}))),r(t.width),f(t.height),g({id:s,color:a[s]}),_(n);case 35:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=void 0;return d(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A();case 2:e=setInterval(d(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:case"end":return e.stop()}}),e)}))),5e3);case 3:case"end":return n.stop()}}),n)})))(),function(){e&&clearInterval(e)}}));var C=function(){var e=d(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u.T,"/board/move?start=").concat(y.pos.y,",").concat(y.pos.x,"&end=").concat(n.y,",").concat(n.x,"&id=").concat(localStorage.getItem("login")),{method:"POST"});case 2:return e.next=4,A();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=function(e,n){return d(o().mark((function r(){var t,a,c,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(y){r.next=4;break}b({pos:e,owner:n}),r.next=37;break;case 4:if((e.x!=y.pos.x+1&&e.x!=y.pos.x-1||e.y!=y.pos.y)&&(e.y!=y.pos.y+1&&e.y!=y.pos.y-1||e.x!=y.pos.x)){r.next=36;break}if(c=v[y.pos.y][y.pos.x].val,i=v[e.y][e.x].val,!(k.id==(null===(t=y.owner)||void 0===t?void 0:t.id)&&c>1)){r.next=25;break}if(n&&k.id!=(null===n||void 0===n?void 0:n.id)){r.next=17;break}return O(e,{val:Math.floor(c/2)+i,owner:k}),O(y.pos,{val:Math.ceil(c/2),owner:k}),b(null),r.next=15,C(e);case 15:r.next=23;break;case 17:if(!(c>i)){r.next=23;break}return O(e,{val:0,owner:null}),O(y.pos,{val:c-i,owner:k}),b(null),r.next=23,C(e);case 23:r.next=34;break;case 25:if(k.id!=(null===(a=y.owner)||void 0===a?void 0:a.id)||k.id!=(null===n||void 0===n?void 0:n.id)||1!=c){r.next=33;break}return O(e,{val:1+i,owner:k}),O(y.pos,{val:0,owner:null}),b(null),r.next=31,C(e);case 31:r.next=34;break;case 33:b({pos:e,owner:n});case 34:r.next=37;break;case 36:e.x==y.pos.x&&e.y==y.pos.y?b(null):b({pos:e,owner:n});case 37:case"end":return r.stop()}}),r)})))};return(0,a.jsxs)("div",{style:{width:"100%"},children:[(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,a.jsx)("h1",{style:{color:null===k||void 0===k?void 0:k.color},children:"Your Color: "}),(0,a.jsx)("div",{style:{width:"4rem",textAlign:"center",height:"4rem",backgroundColor:null===k||void 0===k?void 0:k.color,borderRadius:"1rem",borderStyle:"solid",borderColor:y?"gold":"white",borderWidth:"2px",color:"white",fontSize:"25px",lineHeight:"3.4rem",marginLeft:"1.5%"}})]}),(0,a.jsx)("div",{style:{width:"100%"},children:Array.from(Array(l).keys()).map((function(e){return(0,a.jsx)("div",{style:{display:"flex",flexDirection:"row",minWidth:"100%"},children:Array.from(Array(n).keys()).map((function(n){return(0,a.jsx)(s,{value:v[e][n].val,position:{x:n,y:e},onClick:T,selected:y&&n==y.pos.x&&e==y.pos.y,owner:v[e][n].owner})}))})}))})]})}},520:function(e,n,r){"use strict";r.d(n,{T:function(){return t}});var t="https://EmpireBackend.asra.repl.co"},1163:function(e,n,r){e.exports=r(387)}},function(e){e.O(0,[774,888,179],(function(){return n=9986,e(e.s=n);var n}));var n=e.O();_N_E=n}]);